(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[64],{515:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));const a="".concat("http://34.208.193.210/apipagos/api/","usuariogrupo");function c(e,t,i){let c=a,r="";return null!==e&&(r+="/"+e),null!==t&&(r+="/"+t),c+=r,fetch(c,{method:"GET",headers:{Authorization:"Bearer "+i,Accept:"application/json"}}).then((function(e){return e.json()})).catch((e=>{"Failed to fetch"==e.message&&alert("Error de conexi\xf3n. Revise si est\xe1 conectado a Internet.")}))}},516:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));const a="".concat("http://34.208.193.210/apipagos/api/","usuariogrupo");function c(e,t,i,c,r,s,o,n){let l=a,u="";var d={id_usuariogrupo:e,id_usuario:t,opcion:i,id_grupoautorizacion:c,nivel:r,activo:s,id_usuario_s:o};""!==e&&""!==i&&(u+="/"+e+"/"+i),l+=u;const j=JSON.stringify(d);return fetch(l,{method:"POST",body:j,headers:{Authorization:"Bearer "+n,Accept:"application/json","Content-type":"application/json;charset=UTF-8"}}).then((e=>e.json())).then((e=>e)).catch((e=>e))}},849:function(e,t,i){"use strict";i.r(t);var a=i(1),c=i(16),r=i(818),s=i(719),o=(i(465),i(470)),n=i(515),l=i(516),u=i(463),d=i(459),j=i(464),b=i(501),p=(i(460),i(462)),h=i(10);t.default=()=>{const e=Object(c.g)(),t=Object(c.h)(),[i,O]=Object(a.useState)(null),{session:m,clear:x}=Object(d.useSession)("PendrogonIT-Session"),[g,f]=Object(a.useState)([]),[_,v]=Object(a.useState)([]),[A,S]=Object(a.useState)(!1),[N,k]=Object(a.useState)(0),[E,y]=Object(a.useState)(0),[z,C]=Object(a.useState)(0),[G,w]=Object(a.useState)("");async function I(t){if(3==t){let t=0;m&&(t=m.id);"OK"===await Object(u.a)(t,null,null,"2",m.api_token)&&(x(),e.push("/"))}else S(!1)}function T(e,t,i){1==t?(w("Est\xe1 seguro de eliminar este grupo de autorizaci\xf3n?"),k(e),C(t),S(!0)):2==t&&(w("Est\xe1 seguro de cambiar el estado de este grupo de autorizaci\xf3n?"),k(e),y(i),C(t),S(!0))}if(Object(a.useEffect)((()=>{let e=!0,i=0,a=0;return t.id_usuario&&(i=t.id_usuario),m&&(a=m.id),Object(n.a)(i,null,m.api_token).then((t=>{e&&f(t.detalle)})),Object(o.a)(a,"2","Modulo Grupos Autorizacion",m.api_token).then((t=>{e&&v(t.detalle)})),()=>e=!1}),[]),m){if(t.id_usuario){let i=!1;return function(e){let t=!1;for(let i of _)e==i.objeto&&(t=!0);return t}("Modulo Grupos Autorizacion")||(i=!0),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(r.a,{variant:"primary",show:A,onHide:()=>I(z),centered:!0,children:[Object(h.jsx)(r.a.Header,{closeButton:!0,children:Object(h.jsx)(r.a.Title,{children:"Confirmaci\xf3n"})}),Object(h.jsx)(r.a.Body,{children:G}),Object(h.jsxs)(r.a.Footer,{children:[Object(h.jsx)(p.c,{color:"secondary",onClick:()=>I(z),children:"Cancelar"}),Object(h.jsx)(p.c,{color:"primary",onClick:()=>async function(e,t,i,a){let c;1==i?"OK"===await Object(l.a)(e,t,"1","","","",m.id,m.api_token)&&await Object(n.a)(t,null,m.api_token).then((e=>{f(e.detalle)})):2==i?(c=0==a?"1":"0","OK"===await Object(l.a)(e,t,"3","","",c,m.id,m.api_token)&&await Object(n.a)(t,null,m.api_token).then((e=>{f(e.detalle)}))):3==i&&S(!1)}(N,t.id_usuario,z,E).then((()=>I(1))),children:"Aceptar"})]})]}),Object(h.jsx)("div",{className:"float-left",style:{marginBottom:"10px"},children:Object(h.jsxs)(s.a,{variant:"primary",size:"sm",onClick:()=>e.goBack(),children:[Object(h.jsx)(j.c,{}),"\xa0\xa0Regresar"]})}),Object(h.jsx)("div",{className:"float-right",children:Object(h.jsx)(p.c,{color:"primary",size:"sm",disabled:i,onClick:()=>e.push({pathname:"/usuarios/agregargrupo",id_usuario:t.id_usuario,nombre:t.nombre,email:t.email,estado:m.estado}),children:"Agregar Grupo"})}),Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"user-name",children:t.nombre}),Object(h.jsxs)(p.F,{hover:!0,responsive:!0,align:"middle",className:"mb-0 border",style:{marginTop:"15px"},children:[Object(h.jsx)(p.I,{color:"light",children:Object(h.jsxs)(p.K,{children:[Object(h.jsx)(p.J,{style:{textAlign:"center",width:"40%"},children:"Grupo Autorizaci\xf3n"}),Object(h.jsx)(p.J,{className:"text-center",children:"Nivel"}),Object(h.jsx)(p.J,{className:"text-center",children:"Estado Usuario Grupo"}),Object(h.jsx)(p.J,{className:"text-center",children:"Acciones"})]})}),Object(h.jsx)(p.G,{children:g.map(((a,c)=>{let r="Inactivo";if(0==a.eliminado)return 1==a.activo&&(r="Activo"),Object(h.jsxs)(p.K,{children:[Object(h.jsx)(p.H,{style:{textAlign:"center",width:"40%"},children:a.identificador}),Object(h.jsx)(p.H,{className:"text-center",children:a.nivel}),Object(h.jsx)(p.H,{className:"text-center",children:r}),Object(h.jsxs)(p.H,{className:"text-center",children:[Object(h.jsx)(p.c,{color:"primary",size:"sm",title:"Elegir Nuevo Grupo",disabled:i,onClick:()=>e.push({pathname:"/usuarios/editarusuariogrupo",id_usuariogrupo:a.id_usuariogrupo,id_usuario:t.id_usuario,email:t.email,nombre:t.nombre,nivel:a.nivel,estado:a.activo,id_grupo:a.id_grupoautorizacion,identificador:a.identificador}),children:Object(h.jsx)(j.m,{})})," ",Object(h.jsx)(p.c,{color:"danger",size:"sm",title:"Eliminar Grupo Asociado",disabled:i,onClick:()=>T(a.id_usuariogrupo,1,""),children:Object(h.jsx)(j.s,{})})," ",Object(h.jsx)(p.c,{color:"info",size:"sm",title:"Cambiar de Estado",disabled:i,onClick:()=>T(a.id_usuariogrupo,2,a.activo),children:Object(h.jsx)(b.a,{})})]})]},a.id_usuariogrupo)}))})]})]})]})}return e.push("/usuarios"),Object(h.jsx)("div",{className:"sin-sesion",children:"NO SE CARG\xd3 EL C\xd3DIGO DEL USUARIO. REGRESE A LA PANTALLA DE USUARIOS."})}return e.push("/"),Object(h.jsx)("div",{className:"sin-sesion",children:"SIN SESI\xd3N ACTIVA."})}}}]);
//# sourceMappingURL=64.1ef2453d.chunk.js.map