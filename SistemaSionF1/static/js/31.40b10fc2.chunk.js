(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[31],{497:function(e,c,t){"use strict";t.d(c,"a",(function(){return a}));const n="".concat("http://34.208.193.210/apipagos/api/","permisos");function a(e,c,t){let a=n,i="";return null!==e&&(i.length>0?i+="&id="+e:i+="?id="+e),null!==c&&(i.length>0?i+="&descripcion="+c:i+="?descripcion="+c),a+=i,fetch(a,{method:"GET",headers:{Authorization:"Bearer "+t,Accept:"application/json"}}).then((function(e){return e.json()})).catch((e=>e))}},580:function(e,c,t){"use strict";t.d(c,"a",(function(){return a}));const n="".concat("http://34.208.193.210/apipagos/api/","usuarionotificaciontransaccion");function a(e,c){let t=n,a="";return null!==e&&(a+="/"+e),t+=a,fetch(t,{method:"GET",headers:{Authorization:"Bearer "+c,Accept:"application/json"}}).then((function(e){return e.json()})).catch((e=>e))}},581:function(e,c,t){"use strict";t.d(c,"a",(function(){return a}));const n="".concat("http://34.208.193.210/apipagos/api/","usuarionotificaciontransaccion");function a(e,c,t,a,i,o,s){let r=n,l="";var u={id_usuarionotificaciontransaccion:e,opcion:a,id_usuario:c,TipoTransaccion:t,idUsuario:i,ConfiguracionDocumentos:o};""!==e&&""!==a&&(l+="/"+e+"/"+a),r+=l;const j=JSON.stringify(u);return fetch(r,{method:"POST",body:j,headers:{Authorization:"Bearer "+s,Accept:"application/json","Content-type":"application/json;charset=UTF-8"}}).then((e=>e.json())).then((e=>e)).catch((e=>e))}},869:function(e,c,t){"use strict";t.r(c);var n=t(1),a=t(459),i=t(818),o=t(719),s=t(835),r=(t(465),t(16)),l=t(581),u=t(463),j=t(497),d=t(467),b=(t(460),t(462)),h=t(464),p=t(477),O=t(580),m=t(10);c.default=()=>{const e=Object(r.g)(),[c,t]=(Object(r.h)(),Object(n.useState)(null)),{session:f,clear:x}=Object(a.useSession)("PendrogonIT-Session"),[N,T]=Object(n.useState)(!1),[v,g]=Object(n.useState)(!1),[S,y]=Object(n.useState)([]),[A,E]=Object(n.useState)([]),[k,C]=Object(n.useState)(""),[I,B]=Object(n.useState)("Error!"),[_,D]=Object(n.useState)("danger"),[R,U]=Object(n.useState)({id_usuario:0}),[w,F]=Object(n.useState)(!0),[q,z]=Object(n.useState)(!0),[P,G]=Object(n.useState)(!0),[H,J]=Object(n.useState)(!0),[K,V]=Object(n.useState)(!0),[L,M]=Object(n.useState)(!0),[Q,W]=Object(n.useState)(!0),[X,Y]=Object(n.useState)(!0),[Z,$]=Object(n.useState)(!0);Object(n.useEffect)((()=>{let e=!0;return Object(p.a)(null,null,null,null,f.api_token).then((c=>{e&&E(c.users)})),Object(j.a)(null,null,f.api_token).then((c=>{e&&y(c.permisos)})),()=>e=!1}),[]);const ee=async c=>{let t="",n="",a="",i="";if(c.preventDefault(),H){n="BANCARIO";var o=document.getElementsByName("DocumentoBancaria");for(var s of o)s.checked&&(n+=","+s.value)}if(Q){a="TRANSFERENCIA";o=document.getElementsByName("DocumentoTransferencia");for(var s of o)s.checked&&(a+=","+s.value)}if(w){i="INTERNA";o=document.getElementsByName("DocumentoInterna");for(var s of o)s.checked&&(i+=","+s.value)}if(""!=n&&(t+=""==t?n:"|"+n),""!=a&&(t+=""==t?a:"|"+a),""!=i&&(t+=""==t?i:"|"+i),""!==t){const c=await Object(l.a)("",R.id_usuario,"","",f.id,t,f.api_token);"OK"===c?e.push("/notificacionloteusuario"):"Error"===c?(T(!0),B("Error!"),C("Error de conexi\xf3n.")):"Repetidos"===c&&(T(!0),B("Aviso!"),D("warning"),C(" Intente de nuevo."))}else T(!0),B("Error!"),D("danger"),C("No has seleccionado ninguna opci\xf3n.")};async function ce(c){if(1==c)g(!1);else if(2==c){let c=0;f&&(c=f.id);"OK"===await Object(u.a)(c,null,null,"2",f.api_token)&&(x(),e.push("/"))}}return f?Object(m.jsx)("div",{style:{flexDirection:"row"},children:Object(m.jsxs)(b.i,{children:[Object(m.jsxs)(i.a,{responsive:!0,variant:"primary",show:v,onHide:()=>ce(2),centered:!0,children:[Object(m.jsx)(i.a.Header,{closeButton:!0,children:Object(m.jsx)(i.a.Title,{children:"Confirmaci\xf3n"})}),Object(m.jsx)(i.a.Body,{children:k}),Object(m.jsxs)(i.a.Footer,{children:[Object(m.jsx)(b.c,{color:"secondary",onClick:()=>ce(2),children:"Cancelar"}),Object(m.jsx)(b.c,{color:"primary",onClick:()=>ce(1),children:"Aceptar"})]})]}),Object(m.jsx)("div",{className:"float-left",style:{marginBottom:"10px"},children:Object(m.jsxs)(o.a,{variant:"primary",size:"sm",onClick:()=>e.goBack(),children:[Object(m.jsx)(h.c,{}),"\xa0\xa0Regresar"]})}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsxs)(s.a,{show:N,variant:_,onClose:()=>T(!1),dismissible:!0,children:[Object(m.jsx)(s.a.Heading,{children:I}),Object(m.jsx)("p",{children:k})]}),Object(m.jsx)(b.d,{style:{display:"flex",alignItems:"center"},children:Object(m.jsx)(b.e,{style:{width:"80%"},children:Object(m.jsxs)(b.p,{style:{width:"100%"},children:[Object(m.jsx)("h1",{children:"Agregar configuraci\xf3n de notificaci\xf3n"}),Object(m.jsx)("p",{className:"text-medium-emphasis",children:"Agregar\xe1 a un usuario la configuraci\xf3n para recibir documentos de lotes"}),Object(m.jsxs)(b.y,{className:"mb-3",children:[Object(m.jsx)(b.z,{children:Object(m.jsx)(d.B,{})}),Object(m.jsxs)(b.t,{name:"id_usuario",onChange:async function(e){F(!0),z(!0),G(!0),J(!0),V(!0),M(!0),W(!0),Y(!0),$(!0),U({...R,[e.target.name]:e.target.value}),Object(O.a)(e.target.value,f.api_token).then((e=>{let c=0,t=0,n=0;for(let a in e.UsuarioNotificacionTransaccion)"BANCARIO"==e.UsuarioNotificacionTransaccion[a].TipoTransaccion&&(1==e.UsuarioNotificacionTransaccion[a].id_tipodocumentolote&&(V(!1),c++),2==e.UsuarioNotificacionTransaccion[a].id_tipodocumentolote&&(M(!1),c++)),"TRANSFERENCIA"==e.UsuarioNotificacionTransaccion[a].TipoTransaccion&&(1==e.UsuarioNotificacionTransaccion[a].id_tipodocumentolote&&(Y(!1),t++),2==e.UsuarioNotificacionTransaccion[a].id_tipodocumentolote&&($(!1),t++)),"INTERNA"==e.UsuarioNotificacionTransaccion[a].TipoTransaccion&&(1==e.UsuarioNotificacionTransaccion[a].id_tipodocumentolote&&(z(!1),n++),2==e.UsuarioNotificacionTransaccion[a].id_tipodocumentolote&&(G(!1),n++));2==c&&J(!1),2==t&&W(!1),2==n&&F(!1)}))},children:[Object(m.jsx)("option",{value:"0",children:"Seleccione un usuario."}),A.map(((e,c)=>{if(0==e.eliminado&&1==e.activo)return Object(m.jsx)("option",{value:e.id,children:e.nombre+" "+e.apellido+" ["+e.nombre_usuario+"]"},e.id)}))]})]}),Object(m.jsx)("hr",{}),Object(m.jsxs)("div",{className:H?"":"d-none",children:[Object(m.jsx)("h3",{children:"BANCARIA"}),Object(m.jsx)(b.q,{className:K?"":"d-none",value:"1",type:"checkbox",name:"DocumentoBancaria",label:"PDF"}),Object(m.jsx)(b.q,{className:L?"":"d-none",value:"2",type:"checkbox",name:"DocumentoBancaria",label:"Excel"}),Object(m.jsx)("hr",{})]}),Object(m.jsxs)("div",{className:Q?"":"d-none",children:[Object(m.jsx)("h3",{children:"TRANSFERENCIA"}),Object(m.jsx)(b.q,{className:X?"":"d-none",value:"1",type:"checkbox",name:"DocumentoTransferencia",label:"PDF"}),Object(m.jsx)(b.q,{className:Z?"":"d-none",value:"2",type:"checkbox",name:"DocumentoTransferencia",label:"Excel"}),Object(m.jsx)("hr",{})]}),Object(m.jsxs)("div",{className:w?"":"d-none",children:[Object(m.jsx)("h3",{children:"INTERNA"}),Object(m.jsx)(b.q,{className:q?"":"d-none",value:"1",type:"checkbox",name:"DocumentoInterna",label:"PDF"}),Object(m.jsx)(b.q,{className:P?"":"d-none",value:"2",type:"checkbox",name:"DocumentoInterna",label:"Excel"}),Object(m.jsx)("hr",{})]}),Object(m.jsx)(b.c,{color:"primary",onClick:ee,children:"Guardar Cambios"})]})})})]})}):(e.push("/"),Object(m.jsx)("div",{className:"sin-sesion",children:"SIN SESI\xd3N ACTIVA."}))}}}]);
//# sourceMappingURL=31.40b10fc2.chunk.js.map