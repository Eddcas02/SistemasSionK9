{"version":3,"sources":["views/components/flujos/flujo/PagoBancario.js"],"names":["PagoBancario","history","useHistory","time","setTime","useState","show","setShow","mensaje","setMensaje","session","clear","useSession","permisos","setPermisos","async","Cancelar","opcion","idUsuario","id","postSesionUsuario","api_token","push","useEffect","mounted","getPerfilUsuario","then","items","detalle","tabSolicitudes","permiso","result","item","descripcion","ExistePermiso","eventKey","title","tipo","className","responsive","variant","onHide","centered","Header","closeButton","Title","Body","Footer","onClick","style","width","defaultActiveKey"],"mappings":"8KAAA,gKAgHeA,UAlGM,KACnB,MAAMC,EAAUC,eACTC,EAAMC,GAAWC,mBAAS,OAC1BC,EAAMC,GAAWF,oBAAS,IAC1BG,EAASC,GAAcJ,mBAAS,KACjC,QAAEK,EAAF,MAAWC,GAAUC,qBAAW,wBAC/BC,EAAUC,GAAeT,mBAAS,IAuBzCU,eAAeC,EAASC,GACtB,GAAc,GAAVA,EACFV,GAAQ,QACH,GAAc,GAAVU,EAAa,CACtB,IAAIC,EAAY,EACZR,IACFQ,EAAYR,EAAQS,IAGJ,aADMC,YAAkBF,EAAW,KAAM,KAAM,IAAKR,EAAQW,aAE5EV,IACAV,EAAQqB,KAAK,OAKnB,GArCAC,qBAAU,KACR,IAAIC,GAAU,EAOd,OALAC,YAAiBf,EAAQS,GAAI,IADhB,4BAC6BT,EAAQW,WAAWK,MAAMC,IAC7DH,GACFV,EAAYa,EAAMC,YAGf,IAAOJ,GAAU,IACvB,IA4BCd,EAAS,CACX,IACImB,EAQJ,OApCF,SAAuBC,GACrB,IAAIC,GAAS,EACb,IAAK,IAAIC,KAAQnB,EACXiB,GAAWE,EAAKC,cAClBF,GAAS,GAGb,OAAOA,EAoBiBG,CAAc,gBAGpCL,EACE,cAAC,IAAD,CAAKM,SAAS,mBAAmBC,MAAM,wBAAvC,SACE,cAAC,IAAD,CAAkBC,KAAM,gBAK5B,sBAAKC,UAAU,WAAf,UACE,eAAC,IAAD,CAAOC,YAAU,EAACC,QAAQ,UAAUlC,KAAMA,EAAMmC,OAAQ,IAAMzB,EAAS,GAAI0B,UAAQ,EAAnF,UACE,cAAC,IAAMC,OAAP,CAAcC,aAAW,EAAzB,SACE,cAAC,IAAMC,MAAP,gCAEF,cAAC,IAAMC,KAAP,UAAatC,IACb,eAAC,IAAMuC,OAAP,WACE,cAAC,IAAD,CAAQP,QAAQ,YAAYQ,QAAS,IAAMhC,EAAS,GAApD,sBAGA,cAAC,IAAD,CAAQwB,QAAQ,UAAUQ,QAAS,IAAMhC,EAAS,GAAlD,2BAKJ,qBAAKsB,UAAU,cAAf,SACE,qBAAKW,MAAO,CAAEC,MAAO,QAArB,SACE,eAAC,IAAD,CAAMC,iBAAiB,aAAahC,GAAG,2BAA2BmB,UAAU,OAA5E,UACE,cAAC,IAAD,CAAKH,SAAS,aAAaC,MAAM,aAAjC,SACE,cAAC,IAAD,CAAgBC,KAAM,eAExB,cAAC,IAAD,CAAKF,SAAS,cAAcC,MAAM,cAAlC,SACE,cAAC,UAAD,CAAaC,KAAM,eAErB,cAAC,IAAD,CAAKF,SAAS,kBAAkBC,MAAM,uBAAtC,SACE,cAAC,IAAD,CAAoBC,KAAM,eAE5B,cAAC,IAAD,CAAKF,SAAS,YAAYC,MAAM,gBAAhC,SACE,cAAC,IAAD,CAAWC,KAAM,eAElBR,YAQX,OADA5B,EAAQqB,KAAK,KACN,qBAAKgB,UAAU,aAAf","file":"static/js/117.bd753d02.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { useIdleTimer } from 'react-idle-timer'\nimport { Tab, Tabs, Modal, Button } from 'react-bootstrap'\nimport PendientesPago from './PendientesPago'\nimport Compensados from './Compensados'\nimport RechazadosPorBanco from './RechazadosPorBanco'\nimport SolicitudRetorno from './SolicitudRetorno'\nimport LotesPago from './LotesPago'\nimport { useSession } from 'react-use-session'\nimport { postSesionUsuario } from '../../../../services/postSesionUsuario'\nimport '../../../../scss/estilos.scss'\nimport { getPerfilUsuario } from '../../../../services/getPerfilUsuario'\n\nconst PagoBancario = () => {\n  const history = useHistory()\n  const [time, setTime] = useState(null)\n  const [show, setShow] = useState(false)\n  const [mensaje, setMensaje] = useState('')\n  const { session, clear } = useSession('PendrogonIT-Session')\n  const [permisos, setPermisos] = useState([])\n\n  useEffect(() => {\n    let mounted = true\n    let objeto = 'Modulo Compensacion Pagos'\n    getPerfilUsuario(session.id, '4', objeto, session.api_token).then((items) => {\n      if (mounted) {\n        setPermisos(items.detalle)\n      }\n    })\n    return () => (mounted = false)\n  }, [])\n\n  function ExistePermiso(permiso) {\n    let result = false\n    for (let item of permisos) {\n      if (permiso == item.descripcion) {\n        result = true\n      }\n    }\n    return result\n  }\n\n  async function Cancelar(opcion) {\n    if (opcion == 1) {\n      setShow(false)\n    } else if (opcion == 2) {\n      let idUsuario = 0\n      if (session) {\n        idUsuario = session.id\n      }\n      const respuesta = await postSesionUsuario(idUsuario, null, null, '2', session.api_token)\n      if (respuesta === 'OK') {\n        clear()\n        history.push('/')\n      }\n    }\n  }\n\n  if (session) {\n    let MostrarReprocesar = ExistePermiso('Reprocesar')\n    let tabSolicitudes\n    if (MostrarReprocesar) {\n      tabSolicitudes = (\n        <Tab eventKey=\"solicitudretorno\" title=\"Solicitudes a bandeja\">\n          <SolicitudRetorno tipo={'BANCARIO'} />\n        </Tab>\n      )\n    }\n    return (\n      <div className=\"div-tabs\">\n        <Modal responsive variant=\"primary\" show={show} onHide={() => Cancelar(2)} centered>\n          <Modal.Header closeButton>\n            <Modal.Title>Confirmación</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>{mensaje}</Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"secondary\" onClick={() => Cancelar(2)}>\n              Cancelar\n            </Button>\n            <Button variant=\"primary\" onClick={() => Cancelar(1)}>\n              Aceptar\n            </Button>\n          </Modal.Footer>\n        </Modal>\n        <div className=\"div-content\">\n          <div style={{ width: '100%' }}>\n            <Tabs defaultActiveKey=\"pendientes\" id=\"uncontrolled-tab-example\" className=\"mb-3\">\n              <Tab eventKey=\"pendientes\" title=\"Pendientes\">\n                <PendientesPago tipo={'BANCARIO'} />\n              </Tab>\n              <Tab eventKey=\"compensados\" title=\"Compensados\">\n                <Compensados tipo={'BANCARIO'} />\n              </Tab>\n              <Tab eventKey=\"rechazadosBanco\" title=\"Rechazados por banco\">\n                <RechazadosPorBanco tipo={'BANCARIO'} />\n              </Tab>\n              <Tab eventKey=\"lotespago\" title=\"Lotes de pago\">\n                <LotesPago tipo={'BANCARIO'} />\n              </Tab>\n              {tabSolicitudes}\n            </Tabs>\n          </div>\n        </div>\n      </div>\n    )\n  } else {\n    history.push('/')\n    return <div className=\"sin-sesion\">SIN SESIÓN ACTIVA.</div>\n  }\n}\n\nexport default PagoBancario\n"],"sourceRoot":""}