(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[121],{919:function(e,t,a){"use strict";a.r(t);var o=a(1),s=a(462),n=a(807),r=(a(465),a(719)),i=a(915),c=a(836),l=a(16);a(463);const d="".concat("http://34.208.193.210/apipagos/api/","reportesflujos");function p(e,t,a,o){let s=d,n="";return null!==e&&null!==t&&null!==a&&(n+="/"+e+"/"+t+"/"+a),s+=n,fetch(s,{method:"GET",headers:{Authorization:"Bearer "+o,Accept:"application/json"}}).then((function(e){return e.json()})).catch((e=>e))}const j="".concat("http://34.208.193.210/apipagos/api/","semaforoindividual");function h(e,t,a){let o=j;var s={id_usuario:e,tipo:t};const n=JSON.stringify(s);return fetch(o,{method:"POST",body:n,headers:{Authorization:"Bearer "+a,Accept:"application/json","Content-type":"application/json;charset=UTF-8"}}).then((function(e){return e.json()})).catch((e=>e))}var u=a(459),b=a(464),O=(a(460),a(10));t.default=()=>{const e=Object(l.g)(),[t,a]=Object(o.useState)(null),{session:d,clear:j}=Object(u.useSession)("PendrogonIT-Session"),[f,m]=Object(o.useState)(""),[x,g]=Object(o.useState)([]),[A,S]=Object(o.useState)([]),[I,C]=Object(o.useState)([]),[v,k]=Object(o.useState)([]),[y,F]=Object(o.useState)([]),[N,E]=Object(o.useState)([]),[B,D]=Object(o.useState)([]),[R,_]=Object(o.useState)([]),[T,P]=Object(o.useState)([]),[J,L]=Object(o.useState)([]),[w,M]=Object(o.useState)([]),[K,V]=Object(o.useState)([]),[z,H]=Object(o.useState)([]),[G,U]=Object(o.useState)([]),[q,Q]=Object(o.useState)(0),[W,X]=Object(o.useState)(0),[Y,Z]=Object(o.useState)(0),[$,ee]=Object(o.useState)(0),[te,ae]=Object(o.useState)([]),[oe,se]=Object(o.useState)(!1),[ne,re]=Object(o.useState)({year:"0",mes:"0"});Object(o.useEffect)((()=>{let e=[],t=[],a=[],o=[],s=[],n=[],r=[],i=[],c=[];for(var l=0;l<30;l++)c.push(2021+l);ae(c),p("1","0","0",d.api_token).then((a=>{for(const o of a.flujos)e.push(parseInt(o.CantidadEstados)),t.push(o.estado);g(e),S(t)})),p("2","0","0",d.api_token).then((e=>{for(const t of e.flujos)a.push(parseInt(t.PagosAprobados)),o.push(t.tipo);C(a),k(o)})),p("3","0","0",d.api_token).then((e=>{for(const t of e.flujos)s.push(parseInt(t.promedioPorNivel)),n.push(t.nombreEstadoOrigen+"->"+t.nombreEstadoDestino);F(s),E(n)})),p("4","0","0",d.api_token).then((e=>{let t=0;for(const a of e.flujos)r.push(parseInt(a.cantidad)),t+=parseInt(a.cantidad),i.push(a.nombreSemaforo);Q(t),D(r),_(i)}));let j=[],u=[];h(d.id,"BANCARIO",d.api_token).then((e=>{let t=0;for(const a of e.flujos)j.push(parseInt(a.cantidad)),t+=parseInt(a.cantidad),u.push(a.nombreSemaforo);X(t),P(j),L(u)}));let b=[],O=[];h(d.id,"TRANSFERENCIA",d.api_token).then((e=>{let t=0;for(const a of e.flujos)b.push(parseInt(a.cantidad)),t+=parseInt(a.cantidad),O.push(a.nombreSemaforo);Z(t),M(b),V(O)}));let f=[],m=[];h(d.id,"INTERNA",d.api_token).then((e=>{let t=0;for(const a of e.flujos)f.push(parseInt(a.cantidad)),t+=parseInt(a.cantidad),m.push(a.nombreSemaforo);ee(t),H(f),U(m)}));const x=setInterval((()=>{let e=[],t=[],a=[],o=[],s=[],n=[],r=[];p("1","0","0",d.api_token).then((a=>{for(const o of a.flujos)e.push(parseInt(o.CantidadEstados)),t.push(o.estado);g(e),S(t)})),p("2","0","0",d.api_token).then((e=>{for(const t of e.flujos)a.push(parseInt(t.PagosAprobados)),o.push(t.tipo);C(a),k(o)})),p("3","0","0",d.api_token).then((e=>{for(const t of e.flujos)s.push(parseInt(t.promedioPorNivel));F(s)})),p("4","0","0",d.api_token).then((e=>{let t=0;for(const a of e.flujos)n.push(parseInt(a.cantidad)),t+=parseInt(a.cantidad),r.push(a.nombreSemaforo);Q(t),D(n),_(r)}));let i=[],c=[];h(d.id,"BANCARIO",d.api_token).then((e=>{let t=0;for(const a of e.flujos)i.push(parseInt(a.cantidad)),t+=parseInt(a.cantidad),c.push(a.nombreSemaforo);X(t),P(i),L(c)}));let l=[],j=[];h(d.id,"TRANSFERENCIA",d.api_token).then((e=>{let t=0;for(const a of e.flujos)l.push(parseInt(a.cantidad)),t+=parseInt(a.cantidad),j.push(a.nombreSemaforo);Z(t),M(l),V(j)}));let u=[],b=[];h(d.id,"INTERNA",d.api_token).then((e=>{let t=0;for(const a of e.flujos)u.push(parseInt(a.cantidad)),t+=parseInt(a.cantidad),b.push(a.nombreSemaforo);ee(t),H(u),U(b)}))}),9e5);return()=>clearInterval(x)}),[]);const ie=e=>{re({...ne,[e.target.name]:e.target.value})},ce=async()=>{let e=[],t=[],a=[],o=[],s=[],n=[],r=[];p("1",ne.year,ne.mes,d.api_token).then((a=>{for(const o of a.flujos)e.push(parseInt(o.CantidadEstados)),t.push(o.estado);g(e),S(t)})),p("2",ne.year,ne.mes,d.api_token).then((e=>{for(const t of e.flujos)a.push(parseInt(t.PagosAprobados)),o.push(t.tipo);C(a),k(o)})),p("3",ne.year,ne.mes,d.api_token).then((e=>{for(const t of e.flujos)s.push(parseInt(t.promedioPorNivel));F(s)})),p("4",ne.year,ne.year,d.api_token).then((e=>{let t=0;for(const a of e.flujos)n.push(parseInt(a.cantidad)),t+=parseInt(a.cantidad),r.push(a.nombreSemaforo);Q(t),D(n),_(r)}))};return d?Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(s.B,{children:[Object(O.jsxs)("div",{className:"div-search",style:{marginBottom:"20px"},children:[Object(O.jsxs)(s.t,{name:"year",style:{marginLeft:"51%",marginRight:"10px"},onChange:ie,children:[Object(O.jsx)("option",{children:"Seleccione a\xf1o"}),te.map(((e,t)=>Object(O.jsx)("option",{value:e,children:e},t)))]}),Object(O.jsxs)(s.t,{name:"mes",style:{marginRight:"10px"},onChange:ie,children:[Object(O.jsx)("option",{children:"Seleccione mes"}),Object(O.jsx)("option",{value:"1",children:"Enero"}),Object(O.jsx)("option",{value:"2",children:"Febrero"}),Object(O.jsx)("option",{value:"3",children:"Marzo"}),Object(O.jsx)("option",{value:"4",children:"Abril"}),Object(O.jsx)("option",{value:"5",children:"Mayo"}),Object(O.jsx)("option",{value:"6",children:"Junio"}),Object(O.jsx)("option",{value:"7",children:"Julio"}),Object(O.jsx)("option",{value:"8",children:"Agosto"}),Object(O.jsx)("option",{value:"9",children:"Septiembre"}),Object(O.jsx)("option",{value:"10",children:"Octubre"}),Object(O.jsx)("option",{value:"11",children:"Noviembre"}),Object(O.jsx)("option",{value:"12",children:"Diciembre"})]}),Object(O.jsx)(r.a,{color:"primary",className:"search-button",title:"Filtrar por a\xf1o y mes",onClick:ce,children:Object(O.jsx)(b.r,{})})]}),Object(O.jsx)(s.h,{xs:6,children:Object(O.jsxs)(s.d,{className:"mb-4",children:[Object(O.jsx)(s.g,{children:"Sem\xe1foro de aprobaci\xf3n vs d\xedas de credito"}),Object(O.jsx)(s.e,{style:{height:"340px"},children:Object(O.jsx)(n.a,{height:195,data:{labels:R,datasets:[{backgroundColor:["#D02F2F","#AF940B","#428A49"],data:B}]},options:{plugins:{title:{display:!0,text:"Total de pagos: "+q,font:{weight:"normal"},position:"bottom"},legend:{display:!1}}}})})]})}),Object(O.jsx)(s.h,{xs:6,children:Object(O.jsxs)(s.d,{className:"mb-4",children:[Object(O.jsx)(s.g,{children:"Sem\xe1foro de aprobaci\xf3n vs d\xedas de credito personal"}),Object(O.jsx)(s.e,{children:Object(O.jsxs)(i.a,{defaultActiveKey:"bancaria",id:"uncontrolled-tab-example",className:"mb-3",children:[Object(O.jsx)(c.a,{eventKey:"bancaria",title:"Bancaria",children:Object(O.jsx)(n.a,{data:{labels:J,datasets:[{backgroundColor:["#D02F2F","#AF940B","#428A49"],data:T}]},options:{plugins:{title:{display:!0,text:"Total de pagos: "+W,font:{weight:"normal"},position:"bottom"},legend:{display:!1}},onClick:(t,a)=>{if(a.length>0){let t="NO";0===a[0].index&&(t="ROJO"),1===a[0].index&&(t="AMARILLO"),2===a[0].index&&(t="VERDE"),e.push({pathname:"/pagos/bancario",colorFiltro:t})}}}})}),Object(O.jsx)(c.a,{eventKey:"transferencia",title:"Transferencia",children:Object(O.jsx)(n.a,{data:{labels:K,datasets:[{backgroundColor:["#D02F2F","#AF940B","#428A49"],data:w}]},options:{plugins:{title:{display:!0,text:"Total de pagos: "+Y,font:{weight:"normal"},position:"bottom"},legend:{display:!1}},onClick:(t,a)=>{if(a.length>0){let t="NO";0===a[0].index&&(t="ROJO"),1===a[0].index&&(t="AMARILLO"),2===a[0].index&&(t="VERDE"),e.push({pathname:"/pagos/transferencia",colorFiltro:t})}}}})}),Object(O.jsx)(c.a,{eventKey:"interna",title:"Interna",children:Object(O.jsx)(n.a,{data:{labels:G,datasets:[{backgroundColor:["#D02F2F","#AF940B","#428A49"],data:z}]},options:{plugins:{title:{display:!0,text:"Total de pagos: "+$,font:{weight:"normal"},position:"bottom"},legend:{display:!1}},onClick:(t,a)=>{if(a.length>0){let t="NO";0===a[0].index&&(t="ROJO"),1===a[0].index&&(t="AMARILLO"),2===a[0].index&&(t="VERDE"),e.push({pathname:"/pagos/interna",colorFiltro:t})}}}})})]})})]})}),Object(O.jsx)(s.h,{xs:6,style:{marginTop:"10px"},children:Object(O.jsxs)(s.d,{className:"mb-4",children:[Object(O.jsx)(s.g,{children:"Cantidad de pagos por estado"}),Object(O.jsx)(s.e,{children:Object(O.jsx)(n.b,{data:{labels:A,datasets:[{backgroundColor:["#D02F2F","#AF940B","#428A49","#40389D","#8A5C84","#553D26","#CD530F","#454143","#0B4B4E","#7D1843","#6B9614"],hoverBackgroundColor:["#CC5855","#C7C246","#56A05A","#6F72C5","#8E6BC2","#825E3D","#CF7340","#676768","#18787D","#87405E","#9DCA42"],data:x}]}})})]})}),Object(O.jsx)(s.h,{xs:6,style:{marginTop:"10px"},children:Object(O.jsxs)(s.d,{className:"mb-4",children:[Object(O.jsx)(s.g,{children:"Cantidad de pagos aprobados por tipo"}),Object(O.jsx)(s.e,{children:Object(O.jsx)(n.c,{data:{labels:v,datasets:[{data:I,backgroundColor:["#D02F2F","#AF940B","#428A49"],hoverBackgroundColor:["#CC5855","#C7C246","#56A05A"]}]}})})]})}),Object(O.jsx)(s.h,{xs:12,children:Object(O.jsxs)(s.d,{className:"mb-4",children:[Object(O.jsx)(s.g,{children:"Promedio de tiempo de pagos entre estados (Horas)"}),Object(O.jsx)(s.e,{children:Object(O.jsx)(n.a,{data:{labels:N,datasets:[{label:"Horas",backgroundColor:"#1D2377",data:y}]}})})]})})]})}):(e.push("/"),Object(O.jsx)("div",{className:"sin-sesion",children:"SIN SESI\xd3N ACTIVA."}))}}}]);
//# sourceMappingURL=121.a3af2036.chunk.js.map