{"version":3,"sources":["services/getPendientesReporte.js","views/components/reportes/Pendientes.js"],"names":["API","process","Pendientes","prop","history","useHistory","time","setTime","useState","show","setShow","mensaje","setMensaje","session","clear","useSession","handleClose","customizeToolbar","toolbar","tabs","getTabs","async","Salir","idUsuario","id","postSesionUsuario","api_token","push","useEffect","mounted","pagos","token","fetch","method","headers","Authorization","Accept","then","response","json","catch","error","items","flujos","WebDataRocks","container","beforetoolbarcreated","height","report","dataSource","data","slice","rows","uniqueName","caption","conditions","formula","verde","measure","format","backgroundColor","color","fontFamily","fontSize","amarillo","options","grid","type","showTotals","showGrandTotals","showEmptyData","formats","name","thousandsSeparator","decimalSeparator","currencySymbol","currencySymbolAlign","nullValue","textAlign","isPercent","global","localization","spanish","Modal","responsive","variant","onHide","centered","Header","closeButton","Title","Body","Footer","Button","onClick","className"],"mappings":"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","file":"static/js/107.e0e5fd40.chunk.js","sourcesContent":["const API = `${process.env.REACT_APP_API_URL}pendientesreporte`\n\nexport function getPendientesReporte(token) {\n  return fetch(API, {\n    method: 'GET',\n    headers: {\n      Authorization: 'Bearer ' + token,\n      Accept: 'application/json',\n    },\n  })\n    .then(function (response) {\n      return response.json()\n    })\n    .catch((error) => error)\n}\n","/* eslint-disable */\nimport React, { useState, useEffect } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { useIdleTimer } from 'react-idle-timer'\nimport { useSession } from 'react-use-session'\nimport { Button, Modal } from 'react-bootstrap'\nimport { getPendientesReporte } from '../../../services/getPendientesReporte'\nimport { postSesionUsuario } from '../../../services/postSesionUsuario'\nimport spanish from '../../../lenguaje/es.json'\nimport '../../../scss/estilos.scss'\n\nconst Pendientes = (prop) => {\n  const history = useHistory()\n  const [time, setTime] = useState(null)\n  const [show, setShow] = useState(false)\n  const [mensaje, setMensaje] = useState('')\n  const { session, clear } = useSession('PendrogonIT-Session')\n  const handleClose = () => setShow(false)\n\n  useEffect(() => {\n    let mounted = true\n    let pagos = []\n    getPendientesReporte(session.api_token).then((items) => {\n      if (mounted) {\n        pagos.push(items.flujos)\n        var pivot = new WebDataRocks({\n          container: '#wdr-component',\n          beforetoolbarcreated: customizeToolbar,\n          height: 480,\n          toolbar: true,\n          report: {\n            dataSource: {\n              data: items.flujos,\n            },\n            slice: {\n              rows: [\n                {\n                  uniqueName: 'doc_num',\n                  caption: 'Documento',\n                },\n                {\n                  uniqueName: 'doc_date',\n                  caption: 'Fecha',\n                },\n                {\n                  uniqueName: 'comments',\n                  caption: 'Detalle',\n                },\n                {\n                  uniqueName: 'tipo',\n                  caption: 'Tipo',\n                },\n                {\n                  uniqueName: 'estado',\n                  caption: 'Estado',\n                },\n                {\n                  uniqueName: 'dias_credito',\n                  caption: 'Días Crédito',\n                },\n                {\n                  uniqueName: 'dias_vencimiento',\n                  caption: 'Días Vencimiento',\n                },\n                {\n                  uniqueName: 'porcentaje',\n                  caption: 'Semáforo',\n                },\n              ],\n            },\n            conditions: [\n              {\n                formula: `#value <= ${session.verde}`,\n                measure: 'porcentaje',\n                format: {\n                  backgroundColor: '#60FB7A',\n                  color: '#60FB7A',\n                  fontFamily: 'Arial',\n                  fontSize: '12px',\n                },\n              },\n              {\n                formula: `AND(#value > ${session.verde}, #value <= ${session.amarillo})`,\n                measure: 'porcentaje',\n                format: {\n                  backgroundColor: '#DACF3B',\n                  color: '#DACF3B',\n                  fontFamily: 'Arial',\n                  fontSize: '12px',\n                },\n              },\n              {\n                formula: `#value > ${session.amarillo}`,\n                measure: 'porcentaje',\n                format: {\n                  backgroundColor: '#FC756C',\n                  color: '#FC756C',\n                  fontFamily: 'Arial',\n                  fontSize: '12px',\n                },\n              },\n            ],\n            options: {\n              grid: {\n                type: 'flat',\n                showTotals: 'off',\n                showGrandTotals: 'off',\n              },\n              showEmptyData: false,\n            },\n            formats: [\n              {\n                name: '4ktymhkg',\n                thousandsSeparator: ' ',\n                decimalSeparator: '.',\n                currencySymbol: '',\n                currencySymbolAlign: 'left',\n                nullValue: '',\n                textAlign: 'center',\n                isPercent: true,\n              },\n            ],\n          },\n          global: {\n            localization: spanish,\n          },\n        })\n      }\n    })\n    return () => (mounted = false)\n  }, [])\n\n  function customizeToolbar(toolbar) {\n    var tabs = toolbar.getTabs()\n    toolbar.getTabs = function () {\n      delete tabs[0]\n      delete tabs[1]\n      return tabs\n    }\n  }\n\n  async function Salir() {\n    let idUsuario = 0\n    if (session) {\n      idUsuario = session.id\n    }\n    const respuesta = await postSesionUsuario(idUsuario, null, null, '2', session.api_token)\n    if (respuesta === 'OK') {\n      clear()\n      history.push('/')\n    }\n  }\n\n  if (session) {\n    return (\n      <>\n        <Modal responsive variant=\"primary\" show={show} onHide={() => Salir()} centered>\n          <Modal.Header closeButton>\n            <Modal.Title>Confirmación</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>{mensaje}</Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"secondary\" onClick={() => Salir()}>\n              Cancelar\n            </Button>\n            <Button variant=\"primary\" onClick={handleClose}>\n              Aceptar\n            </Button>\n          </Modal.Footer>\n        </Modal>\n        <div id=\"wdr-component\"></div>\n      </>\n    )\n  } else {\n    history.push('/')\n    return <div className=\"sin-sesion\">SIN SESIÓN ACTIVA.</div>\n  }\n}\n\nexport default Pendientes\n"],"sourceRoot":""}