(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[71],{476:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));const a="".concat("http://34.208.193.210/apipagos/api/","ocultarcolumnausuario");function r(e,t){let o=a,r="";return null!==e&&(r+="/"+e),o+=r,fetch(o,{method:"GET",headers:{Authorization:"Bearer "+t,Accept:"application/json"}}).then((function(e){return e.json()})).catch((e=>e))}},839:function(e,t,o){"use strict";o.r(t);var a=o(1),r=o(462),i=o(16),n=o(719),s=o(818),c=o(469),d=o.n(c),l=o(644),u=o(459),p=o(464),m=(o(460),o(471)),j=o.n(m),_=(o(472),o(470)),f=o(494),h=o(495),g=o(481),b=o(476),v=o(10);t.default=e=>{const t=Object(i.g)(),{session:o}=Object(u.useSession)("PendrogonIT-Session"),[m,x]=Object(a.useState)([]),[O,z]=Object(a.useState)([]),[w,S]=Object(a.useState)(!1),[y,C]=Object(a.useState)(!1),[k,A]=Object(a.useState)(0),[P,E]=Object(a.useState)([]),[N,R]=Object(a.useState)("285px");function I(e){let t=!1;for(let o of P)e==o.NombreColumna&&(t=!0);return t}function T(e){let t=!1;for(let o of O)e==o.descripcion&&(t=!0);return t}Object(a.useEffect)((()=>{let e=!0,t=0;return o&&(t=o.id),Object(l.a)(t,o.api_token).then((t=>{if(e){x(t.flujos);let e=[];t.flujos.forEach((t=>{e.push({id_flujo:t.id_flujo,estado:t.estado,nivel:t.nivel,id_grupo:t.id_grupoautorizacion,PuedoAutorizar:t.PuedoAutorizar,pago:t.doc_num})})),sessionStorage.setItem("listaPagos",JSON.stringify(e))}})),Object(_.a)(o.id,"4","Modulo Autorizacion Pagos",o.api_token).then((t=>{e&&z(t.detalle)})),Object(b.a)(o.id,o.api_token).then((t=>{e&&(E(t.ocultar),t.ocultar.length>0?R("auto"):R("285px"))})),()=>e=!1}),[k]);const F={headRow:{style:{borderTopStyle:"solid",borderTopWidth:"1px",borderTopColor:c.defaultThemes.default.divider.default}},headCells:{style:{paddingLeft:"8px",paddingRight:"8px",fontSize:"12px","&:not(:last-of-type)":{borderRightStyle:"solid",borderRightWidth:"1px",borderRightColor:c.defaultThemes.default.divider.default}}},cells:{style:{"&:not(:last-of-type)":{borderRightStyle:"solid",borderRightWidth:"1px",borderRightColor:c.defaultThemes.default.divider.default}}}};const B=e=>{e.target.checked?sessionStorage.setItem(e.target.value,"true"):sessionStorage.setItem(e.target.value,"false")},D=(e,t)=>"QTZ"===t?M.format(e):G.format(e);let M=new Intl.NumberFormat("es-GT",{style:"currency",currency:"GTQ"}),G=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});const J=Object(a.useMemo)((()=>[{name:" ",cell:function(e){let t=T("Autorizar");if(1==e.PuedoAutorizar&&t)return C(!0),Object(v.jsx)("div",{children:Object(v.jsx)("input",{type:"checkbox",name:"autorizarPago",value:e.id_flujo+"|"+e.estado+"|"+e.nivel,style:{width:"18px",height:"18px"},onChange:B,defaultChecked:(o=e.id_flujo+"|"+e.estado+"|"+e.nivel,"true"===sessionStorage.getItem(o))},e.id_flujo)});var o},center:!0,width:"35px",omit:I("Selecci\xf3n")},{name:"Empresa",selector:e=>e.empresa_nombre,center:!0,style:{fontSize:"11px"},sortable:!0,wrap:!0,width:"150px",omit:I("Empresa")},{name:"No.",selector:e=>e.doc_num,center:!0,style:{fontSize:"11px"},sortable:!0,width:"90px",omit:I("No. documento")},{name:"Fecha Sis.",selector:e=>e.creation_date,center:!0,sortable:!0,style:{fontSize:"11px"},width:"100px",omit:I("Fecha sistema")},{name:"Beneficiario",selector:e=>e.en_favor_de,center:!0,sortable:!0,style:{fontSize:"11px"},wrap:!0,width:"250px",omit:I("Beneficiario")},{name:"Concepto",selector:e=>e.comments,center:!0,style:{fontSize:"11px"},wrap:!0,width:N,omit:I("Concepto")},{name:"Monto",selector:e=>D(e.doc_total,e.doc_curr),center:!0,sortable:!0,style:{fontSize:"11px"},width:"120px",omit:I("Monto")},{name:"Acciones",cell:function(e){let o=T("Cargar");return T("Visualizar_completo")?Object(v.jsx)("div",{children:Object(v.jsx)(n.a,{"data-tag":"allowRowEvents",variant:"success",size:"sm",title:"Consultar Detalle Pago",onClick:()=>t.push({pathname:"/pagos/tabs",id_flujo:e.id_flujo,pago:e.doc_num,estado:e.estado,nivel:e.nivel,id_grupo:e.id_grupoautorizacion,PuedoAutorizar:e.PuedoAutorizar,pagina:"transferencia"}),children:Object(v.jsx)(p.k,{})})}):1==e.estado?Object(v.jsxs)("div",{children:[Object(v.jsx)(n.a,{"data-tag":"allowRowEvents",size:"sm",variant:"primary",title:"Cargar Archivo",className:o?"":"d-none",onClick:()=>t.push({pathname:"/archivoflujo/nuevo",id_flujo:e.id_flujo,pago:e.doc_num,grupo:e.id_grupoautorizacion,estado:e.estado}),children:Object(v.jsx)(p.j,{})})," ",Object(v.jsx)(n.a,{"data-tag":"allowRowEvents",variant:"success",size:"sm",title:"Consultar Detalle Pago",onClick:()=>t.push({pathname:"/pagos/tabs",id_flujo:e.id_flujo,pago:e.doc_num,estado:e.estado,nivel:e.nivel,id_grupo:e.id_grupoautorizacion,PuedoAutorizar:e.PuedoAutorizar,pagina:"transferencia"}),children:Object(v.jsx)(p.k,{})})]}):2==e.estado?Object(v.jsxs)("div",{children:[Object(v.jsx)(n.a,{"data-tag":"allowRowEvents",size:"sm",variant:"primary",title:"Cargar Archivo",className:o?"":"d-none",onClick:()=>t.push({pathname:"/archivoflujo/nuevo",id_flujo:e.id_flujo,pago:e.doc_num,grupo:e.id_grupoautorizacion,estado:e.estado}),children:Object(v.jsx)(p.j,{})})," ",Object(v.jsx)(n.a,{"data-tag":"allowRowEvents",size:"sm",variant:"primary",title:"Asignar Grupo",onClick:()=>t.push({pathname:"/pagos/flujogrupo",id_flujo:e.id_flujo,pago:e.doc_num}),children:Object(v.jsx)(p.x,{})})," ",Object(v.jsx)(n.a,{"data-tag":"allowRowEvents",variant:"success",size:"sm",title:"Consultar Detalle Pago",onClick:()=>t.push({pathname:"/pagos/tabs",id_flujo:e.id_flujo,pago:e.doc_num,estado:e.estado,nivel:e.nivel,id_grupo:e.id_grupoautorizacion,PuedoAutorizar:e.PuedoAutorizar,pagina:"transferencia"}),children:Object(v.jsx)(p.k,{})})]}):Object(v.jsxs)("div",{children:[Object(v.jsx)(n.a,{"data-tag":"allowRowEvents",size:"sm",variant:"primary",title:"Cargar Archivo",className:o?"":"d-none",onClick:()=>t.push({pathname:"/archivoflujo/nuevo",id_flujo:e.id_flujo,pago:e.doc_num,grupo:e.id_grupoautorizacion,estado:e.estado}),children:Object(v.jsx)(p.j,{})})," ",Object(v.jsx)(n.a,{"data-tag":"allowRowEvents",variant:"success",size:"sm",title:"Consultar Detalle Pago",onClick:()=>t.push({pathname:"/pagos/tabs",id_flujo:e.id_flujo,pago:e.doc_num,estado:e.estado,nivel:e.nivel,id_grupo:e.id_grupoautorizacion,PuedoAutorizar:e.PuedoAutorizar,pagina:"transferencia"}),children:Object(v.jsx)(p.k,{})})]})},center:!0,width:"125px",omit:I("Acciones")}])),W={columns:J,data:m,filterPlaceholder:"Filtrar datos",export:!1,print:!1};async function H(e){if(1==e){let e=[];var t=document.getElementsByName("autorizarPago");for(var a of t)if(a.checked){let t=a.value,r=a.value.split("|");if(3==r[1])await Object(f.a)(r[0],"2","","",null,o.id,o.api_token),await Object(h.a)(r[0],"4",o.id,"Aprobado","1",o.api_token),sessionStorage.removeItem(t);else if(4==r[1]){const a=await Object(f.a)(r[0],r[2],"","",null,o.id,o.api_token);if("OK"==a)await Object(h.a)(r[0],"4",o.id,"Aprobado",r[2],o.api_token),sessionStorage.removeItem(t);else if("Finalizado"==a){"OK"==await Object(h.a)(r[0],"5",o.id,"Autorizaci\xf3n completa",r[2],o.api_token)&&(e.push(r[0]),sessionStorage.removeItem(t))}}}e.length>0&&await Object(g.a)(e,o.id,"autorizado por completo.","",o.api_token),A(k+1),S(!1)}else 2==e&&S(!1)}return o?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(s.a,{responsive:!0,variant:"primary",show:w,centered:!0,children:[Object(v.jsx)(s.a.Header,{closeButton:!0,children:Object(v.jsx)(s.a.Title,{children:"Confirmaci\xf3n"})}),Object(v.jsx)(s.a.Body,{children:"\xbfEst\xe1 seguro de autorizar los pagos seleccionados?"}),Object(v.jsxs)(s.a.Footer,{children:[Object(v.jsx)(n.a,{variant:"secondary",onClick:()=>H(2),children:"Cancelar"}),Object(v.jsx)(n.a,{variant:"primary",onClick:()=>H(1),children:"Aceptar"})]})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)(r.c,{className:y?"float-right":"d-none float-right",color:"primary",size:"sm",onClick:()=>{S(!0)},children:"Autorizar pagos seleccionados"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{})]}),Object(v.jsx)(j.a,{...W,children:Object(v.jsx)(d.a,{columns:J,noDataComponent:"No hay pagos que mostrar",data:m,customStyles:F,pagination:!0,paginationPerPage:25,responsive:!0,persistTableHead:!0,striped:!0,onSort:function(e,t,o){"Empresa"==e.name&&"asc"==t&&m.sort((function(e,t){return e.empresa_nombre>t.empresa_nombre?1:e.empresa_nombre<t.empresa_nombre?-1:0})),"Empresa"==e.name&&"desc"==t&&m.sort((function(e,t){return e.empresa_nombre>t.empresa_nombre?-1:e.empresa_nombre<t.empresa_nombre?1:0})),"No."==e.name&&"asc"==t&&m.sort((function(e,t){return e.doc_num>t.doc_num?1:e.doc_num<t.doc_num?-1:0})),"No."==e.name&&"desc"==t&&m.sort((function(e,t){return e.doc_num>t.doc_num?-1:e.doc_num<t.doc_num?1:0})),"Fecha Sis."==e.name&&"asc"==t&&m.sort((function(e,t){return e.creation_date>t.creation_date?1:e.creation_date<t.creation_date?-1:0})),"Fecha Sis."==e.name&&"desc"==t&&m.sort((function(e,t){return e.creation_date>t.creation_date?-1:e.creation_date<t.creation_date?1:0})),"Beneficiario"==e.name&&"asc"==t&&m.sort((function(e,t){return e.en_favor_de>t.en_favor_de?1:e.en_favor_de<t.en_favor_de?-1:0})),"Beneficiario"==e.name&&"desc"==t&&m.sort((function(e,t){return e.en_favor_de>t.en_favor_de?-1:e.en_favor_de<t.en_favor_de?1:0})),"Monto"==e.name&&"asc"==t&&m.sort((function(e,t){return D(e.doc_total,e.doc_curr)>D(t.doc_total,t.doc_curr)?1:D(e.doc_total,e.doc_curr)<D(t.doc_total,t.doc_curr)?-1:0})),"Monto"==e.name&&"desc"==t&&m.sort((function(e,t){return D(e.doc_total,e.doc_curr)>D(t.doc_total,t.doc_curr)?-1:D(e.doc_total,e.doc_curr)<D(t.doc_total,t.doc_curr)?1:0}));let a=[];return m.forEach((e=>{a.push({id_flujo:e.id_flujo,estado:e.estado,nivel:e.nivel,id_grupo:e.id_grupoautorizacion,PuedoAutorizar:e.PuedoAutorizar,pago:e.doc_num})})),sessionStorage.setItem("listaPagos",JSON.stringify(a)),!0},dense:!0})})]}):(t.push("/"),Object(v.jsx)("div",{className:"sin-sesion",children:"SIN SESI\xd3N ACTIVA."}))}}}]);
//# sourceMappingURL=71.bb91178b.chunk.js.map